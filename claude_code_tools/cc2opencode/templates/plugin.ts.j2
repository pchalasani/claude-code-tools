/**
 * OpenCode Plugin - Migrated from Claude Code hooks
 *
 * Generated by cc2opencode
 *
 * This plugin was automatically generated from Claude Code hook configurations.
 * Review and adjust as needed for your specific use case.
 */

import type { Plugin } from "@opencode-ai/plugin"

export const {{ plugin_name }}: Plugin = async (ctx) => {
  return {
{% for event, hooks in hook_groups.items() %}
{% if event == "tool.execute.before" %}
    "tool.execute.before": async (input, output) => {
{% for hook in hooks %}
      // Migrated from Claude Code {{ hook.original_event }} hook
{% if hook.matcher %}
      // Original matcher: {{ hook.matcher }}
{% endif %}
{% if hook.hook_type == "command" %}
      if ({{ hook.condition }}) {
        await ctx.$`{{ hook.command }}`
      }
{% else %}
      // NOTE: Prompt hooks require manual implementation
      // Original prompt: {{ hook.prompt }}
      if ({{ hook.condition }}) {
        // TODO: Implement prompt-based logic here
        console.log("Prompt hook triggered for:", input.tool)
      }
{% endif %}

{% endfor %}
    },

{% elif event == "tool.execute.after" %}
    "tool.execute.after": async (input, output) => {
{% for hook in hooks %}
      // Migrated from Claude Code {{ hook.original_event }} hook
{% if hook.matcher %}
      // Original matcher: {{ hook.matcher }}
{% endif %}
{% if hook.hook_type == "command" %}
      if ({{ hook.condition }}) {
        await ctx.$`{{ hook.command }}`
      }
{% else %}
      // NOTE: Prompt hooks require manual implementation
      // Original prompt: {{ hook.prompt }}
      if ({{ hook.condition }}) {
        // TODO: Implement prompt-based logic here
        console.log("Prompt hook triggered for:", input.tool)
      }
{% endif %}

{% endfor %}
    },

{% elif event == "chat.message" %}
    "chat.message": async (input, output) => {
{% for hook in hooks %}
      // Migrated from Claude Code {{ hook.original_event }} hook
{% if hook.hook_type == "command" %}
      await ctx.$`{{ hook.command }}`
{% else %}
      // NOTE: Prompt hooks require manual implementation
      // Original prompt: {{ hook.prompt }}
      // TODO: Implement prompt-based logic here
{% endif %}

{% endfor %}
    },

{% elif event == "permission.ask" %}
    "permission.ask": async (input, output) => {
{% for hook in hooks %}
      // Migrated from Claude Code {{ hook.original_event }} hook
{% if hook.hook_type == "command" %}
      await ctx.$`{{ hook.command }}`
{% else %}
      // NOTE: Prompt hooks require manual implementation
      // Original prompt: {{ hook.prompt }}
      // TODO: Implement permission logic here
      // Set output.status to "allow", "deny", or "ask"
{% endif %}

{% endfor %}
    },

{% elif event == "experimental.session.compacting" %}
    "experimental.session.compacting": async (input, output) => {
{% for hook in hooks %}
      // Migrated from Claude Code {{ hook.original_event }} hook
{% if hook.hook_type == "command" %}
      await ctx.$`{{ hook.command }}`
{% else %}
      // NOTE: Prompt hooks require manual implementation
      // Original prompt: {{ hook.prompt }}
      // Add context to output.context array
      output.context.push("Additional context here")
{% endif %}

{% endfor %}
    },

{% elif event == "event" %}
    event: async ({ event }) => {
{% for hook in hooks %}
      // Migrated from Claude Code {{ hook.original_event }} hook
{% if hook.original_event == "Stop" or hook.original_event == "SessionEnd" %}
      if (event.type === "session.idle") {
{% elif hook.original_event == "SessionStart" %}
      if (event.type === "session.created") {
{% elif hook.original_event == "SubagentStop" %}
      // SubagentStop - check for relevant session events
      if (event.type === "session.idle") {
{% elif hook.original_event == "Notification" %}
      if (event.type === "tui.toast.show") {
{% endif %}
{% if hook.hook_type == "command" %}
        await ctx.$`{{ hook.command }}`
{% else %}
        // NOTE: Prompt hooks require manual implementation
        // Original prompt: {{ hook.prompt }}
        // TODO: Implement event handling logic here
{% endif %}
      }

{% endfor %}
    },

{% endif %}
{% endfor %}
  }
}
